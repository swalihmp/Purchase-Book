{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>Admin User</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
	
	<style>
        
        /* add user  */
        
        .wrapper{
            width: 80%;
            height: 70vh;
            margin: 50px auto;
            background-color: #fff;
            border-radius: 10px;
            text-align: center;
            box-shadow: rgba(0, 0, 0, 0.1);
        }
        .wrapper h2{
            color: #554cd1;
            margin-bottom: 30px;
        }
        .add-update .input{
            width: 70%;
            outline: none;
            border: 1px solid #fff;
            padding: 12px 20px;
            margin-bottom: 10px;
            margin-top: 10px;
            border-radius: 10px;
            background: #e4e4e4;

        
        }
        .add-update select{
            width: 70%;
            outline: none;
            border: 1px solid #fff;
            padding: 12px 20px;
            margin-bottom: 30px;
            border-radius: 10px;
            background: #e4e4e4;
        }
        .fbtn{
            padding: 0 143px;
            display: flex;
            justify-content: space-between;
        }
        .frm-btn{
            width: 150px;
            color: #fff;
            background: #594ef7;
        }
    </style>
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
</head>
<body>
   <input type="checkbox" id="menu-toggle">
    <div class="sidebar">
        <div class="side-header">
            <h3>A<span>dmin Panel</span></h3>
        </div>
        
        <div class="side-content">
            <div class="profile">
                <div class="profile-img bg-img" style="background-image: url(/static/img/customer01.jpg)"></div>
                <h4>Swalih</h4>
                <small>Administrator</small>
            </div>

            <div class="side-menu">
                <ul>
                    <li>
                       <a href="{% url 'home' %}">
                            <span class="las la-home"></span>
                            <small>Dashboard</small>
                        </a>
                    </li>
                    <li>
                       <a href="{% url 'add_prod' %}" class="active">
                            <span class="las la-user-alt"></span>
                            <small>Add Product</small>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'add_short' %}">
                             <span class="las la-user-alt"></span>
                             <small>Add Short</small>
                         </a>
                     </li>
                     <li>
                        <a href="{% url 'add_exp' %}">
                             <span class="las la-user-alt"></span>
                             <small>Add Exp</small>
                         </a>
                     </li>
                     <li>
                        <a href="{% url 'add_party' %}">
                             <span class="las la-user-alt"></span>
                             <small>Update Party</small>
                         </a>
                     </li>
                     <li>
                        <a href="{% url 'showorder' %}">
                             <span class="las la-list"></span>
                             <small>Show Ordered List</small>
                         </a>
                   <li>
                    <li>
                        <a href="{% url 'exp_list' %}">
                             <span class="las la-list"></span>
                             <small>Show Expiry List</small>
                         </a>
                   </li>
                    <li>
                       <a href="{% url 'logout_p' %}">
                            <span class="las la-envelope"></span>
                            <small>Logout</small>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="main-content">
        
        <header>
            <div class="header-content">
                <label for="menu-toggle">
                    <span class="las la-bars"></span>
                </label>
                
                <div class="header-menu">
                   
                    <a href="{% url 'logout_p' %}">
                    <div class="user">
                        <div class="bg-img" style="background-image: url(img/1.jpeg)"></div>
                        
                        <span class="las la-power-off"></span>
                        <span>Logout</span>
                    </div>
					</a>
                </div>
            </div>
        </header>
        
        
        <main>
            
            <div class="page-header">
                <h1>Add Product</h1>
            </div>
            
            <div class="page-content">
                <div class="records table-responsive">
				
				<div class="wrapper">
				<h2>Enter Product Details</h2>
				<form class="add-update" action="" method="POST">
				{% csrf_token %}

                    <input list="pname" id="party" class="input" placeholder="Product Name" name="pname" required>
                    <datalist id="pname">
                        {% for i in datas %}
                        <option value="{{ i.pname }}"></option>
                        {% endfor %}
                    </datalist>

                    <br><input type="button" class="input" onclick="load_data()" style="width: 150px; background: #594ef7;" value="Load"><br>

                    <input type="text" class="input" placeholder="Party 1" id="party1" name="party1" required>

                    <div style="display: flex; justify-content: center;">
                        <input type="radio" name="p1_imp" id="p1_imp" value="imp">
                        <label style="padding-left: 1rem; padding-right: 1.5rem;">Important</label>

                        <input type="radio" name="p1_imp" id="p1_imp" value="nimp" checked>
                        <label style="padding-left: 1rem;">Non</label>
                    </div>

                    <input type="text" class="input" placeholder="Party 2" id="party2" name="party2">

                    <div style="display: flex; justify-content: center;">
                        <input type="radio" name="p2_imp" value="imp">
                        <label style="padding-left: 1rem; padding-right: 1.5rem;">Important</label>

                        <input type="radio" name="p2_imp" value="nimp" checked>
                        <label style="padding-left: 1rem;">Non</label>
                    </div>

                    <input type="text" class="input" placeholder="Party 3" name="party3" id="party3" >

                    <div style="display: flex; justify-content: center;">
                        <input type="radio" name="p3_imp" value="imp">
                        <label style="padding-left: 1rem; padding-right: 1.5rem;">Important</label>

                        <input type="radio" name="p3_imp" value="nimp" checked>
                        <label style="padding-left: 1rem;">Non</label>
                    </div>

                    <input type="text" class="input" placeholder="Party 4" name="party4" id="party4" >

                    <div style="display: flex; justify-content: center;">
                        <input type="radio" name="p4_imp" value="imp">
                        <label style="padding-left: 1rem; padding-right: 1.5rem;">Important</label>

                        <input type="radio" name="p4_imp" value="nimp" checked>
                        <label style="padding-left: 1rem;">Non</label>
                    </div>
					<br><input type="submit" class="input" style="width: 150px; background: #594ef7;" name="Add User">
				</div>
                </div>
            
            </div>
            
        </main>
        
    </div>

    <script>
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i<cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0,name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        
        function load_data(){
            console.log("clicked")
            let pname = document.getElementById("party").value
            let party1 = document.getElementById("party1")
            let party2 = document.getElementById("party2")
            let party3 = document.getElementById("party3")
            let party4 = document.getElementById("party4")
            console.log(pname)
            var csrftoken = getCookie('csrftoken');
            var url = "{% url 'load_data' %}"
            fetch(url, {
                method : "POST",
                headers: {
                  "Content-Type": "application/json",
                  "X-CSRFToken": csrftoken, 
                },
                body: JSON.stringify({
                    pname : pname,
                }),

            })
            .then(response => response.json())
            .then((res)=>{
                if(res){
                    party1.value = res.party1
                    party2.value = res.party2
                    party3.value = res.party3
                    party4.value = res.party4
                }
            })

        }
    </script>

</body>
</html>